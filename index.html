<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie TV - Watch & Download Latest HD Movies</title>
    
    <!-- Meta Tags, Styles, etc. (‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) -->
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://hindimovie.netlify.app/" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://hindimovie.netlify.app/">
    <meta property="og:title" content="Movie TV - Watch & Download Latest HD Movies">
    <meta property="og:description" content="Explore and download a vast collection of the latest and classic movies in HD.">
    <meta property="og:image" content="https://i.postimg.cc/0yCyzmhm/IMG-20250730-220406.jpg" id="og-image-meta">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://hindimovie.netlify.app/">
    <meta property="twitter:title" content="Movie TV - Watch & Download Latest HD Movies">
    <meta property="twitter:description" content="Explore and download a vast collection of the latest and classic movies in HD.">
    <meta property="twitter:image" content="https://i.postimg.cc/0yCyzmhm/IMG-20250730-220406.jpg" id="twitter-image-meta">
    
    <!-- ‡¶®‡¶§‡ßÅ‡¶®: Manifest ‡¶´‡¶æ‡¶á‡¶≤ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá -->
    <link rel="manifest" href="/manifest.json">

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    <!-- ‡¶®‡¶§‡ßÅ‡¶®: Messaging SDK ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá -->
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-messaging-compat.js"></script>

    <style>
        /* ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§, ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶Æ‡¶æ‡¶®‡ßç‡¶Ø ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® */
        html{scroll-behavior:smooth}body{margin:0;padding:20px;font-family:Arial,sans-serif;background-color:#111;color:#fff;overflow-x:hidden}body.loading>*:not(#loader){display:none}header{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background-color:#1a1a1a;box-shadow:0 2px 10px rgba(0,0,0,.5);border-bottom:2px solid orange}
        .header-title-container { display: flex; align-items: center; gap: 15px; }
        header h1{font-family:'Montserrat',sans-serif;font-size:24px;font-weight:700;margin:0;letter-spacing:1.5px;background:linear-gradient(45deg,#ffc107,#ff8c00);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;text-shadow:2px 2px 4px rgba(0,0,0,.2)}
        .header-actions{display:flex;align-items:center; gap: 10px;}
        /* ‡¶®‡¶§‡ßÅ‡¶®: ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶®‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        #notification-btn { background: none; border: none; cursor: pointer; padding: 5px; line-height: 0; }
        #notification-btn .bell-icon, #notification-btn .bell-slash-icon { display: none; }
        #notification-btn.unsubscribed .bell-icon { display: block; fill: #fff; }
        #notification-btn.subscribed .bell-slash-icon { display: block; fill: orange; }
        /* ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶∏‡¶¨ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§ */
    </style>
</head>
<body>
    <header>
        <div class="header-title-container">
            <h1>üé¨ Movie TV</h1>
            <!-- ‡¶®‡¶§‡ßÅ‡¶®: ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶® ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá -->
            <button id="notification-btn" title="Toggle Notifications">
                <svg class="bell-icon" xmlns="http://www.w3.org/2000/svg" height="26px" viewBox="0 0 24 24" width="26px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"/></svg>
                <svg class="bell-slash-icon" xmlns="http://www.w3.org/2000/svg" height="26px" viewBox="0 0 24 24" width="26px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-11c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68c-.24.06-.47.15-.7.25L12 2l-1.42 1.42 12.02 12.02L14 14.84V11zm-4 0c0 .24-.02.48-.04.71l1.48 1.48C11.53 13.1 11.76 13 12 13c-2.49 0-4.5 2.01-4.5 4.5V16h-2v-5c0-1.8.84-3.41 2.16-4.43L6.03 4.93C4.58 6.13 3.5 7.92 3.5 10v5l-2 2v1h13.28l-2-2H8v-4.5z"/></svg>
            </button>
        </div>
        <div class="header-actions">
             <!-- ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶ú‡¶ø‡¶®‡¶ø‡¶∏ ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§ -->
        </div>
    </header>
    
    <!-- ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶∏‡¶¨ HTML (‡¶¨‡¶°‡¶ø) ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§ ‡¶•‡¶æ‡¶ï‡¶¨‡ßá... -->

<script>
    const firebaseConfig = {
      apiKey: "AIzaSyD-tlrPK8s9h87PVqtvprBy_phcCqONLeU",
      authDomain: "my-movie-81a4b.firebaseapp.com",
      databaseURL: "https://my-movie-81a4b-default-rtdb.firebaseio.com",
      projectId: "my-movie-81a4b",
      storageBucket: "my-movie-81a4b.firebasestorage.app",
      messagingSenderId: "249876555391",
      appId: "1:249876555391:web:81f3ad52805b0aa314c14a",
      measurementId: "G-RHPWTHQHS2"
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const messaging = firebase.messaging(); // ‡¶®‡¶§‡ßÅ‡¶®
    // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßÅ‡¶∞‡¶®‡ßã ‡¶∏‡¶¨ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡ßü‡ßá‡¶¨‡¶≤ ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§
    const moviesRef = database.ref('movies');
    let allMovieData = {};
    let currentCategoryFilter = 'all';
    let lastClickedMovieSlug = null;

    document.addEventListener('DOMContentLoaded', () => {
        // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßÅ‡¶∞‡¶®‡ßã ‡¶ï‡ßã‡¶° ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§
        setupNotificationButton(); // ‡¶®‡¶§‡ßÅ‡¶® ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶ï‡¶≤
        // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßÅ‡¶∞‡¶®‡ßã ‡¶ï‡ßã‡¶° ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§
    });

    // ‡¶®‡¶§‡ßÅ‡¶®: ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function setupNotificationButton() {
        const notificationBtn = document.getElementById('notification-btn');
        if ('Notification' in window && 'serviceWorker' in navigator) {
            const VAPID_KEY = 'BK44_K7jaSVdpmAmzQpfSRdyYQgGIL2yXDAAJWsSH0dEaNTYSEc8J703se1FKEon4VFJk78LPXplWigPPj-bmFE';

            if (localStorage.getItem('isSubscribed') === 'true') {
                notificationBtn.className = 'subscribed';
            } else {
                notificationBtn.className = 'unsubscribed';
            }

            notificationBtn.addEventListener('click', () => {
                if (localStorage.getItem('isSubscribed') === 'true') {
                    alert('You are already subscribed to notifications.');
                    return;
                }
                
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        messaging.getToken({ vapidKey: VAPID_KEY }).then(token => {
                            if (token) {
                                database.ref('fcm_tokens/' + token).set(true);
                                localStorage.setItem('isSubscribed', 'true');
                                notificationBtn.className = 'subscribed';
                                alert('Successfully subscribed to notifications!');
                            }
                        }).catch(err => console.log('An error occurred while retrieving token. ', err));
                    } else {
                        alert('Notification permission was denied.');
                    }
                });
            });
        } else {
            notificationBtn.style.display = 'none';
        }
    }

    // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßÅ‡¶∞‡¶®‡ßã ‡¶∏‡¶¨ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (loadAndDisplayMovies, openViewer, closeModal, etc.) ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§ ‡¶•‡¶æ‡¶ï‡¶¨‡ßá...

</script>
</body>
    </html>
