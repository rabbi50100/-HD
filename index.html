<!DOCTYPE html>
<html lang="en">
<head>
<script type='text/javascript' src='//pl24867056.profitableratecpm.com/3a/69/d1/3a69d11472d2ab7730e620c747eb79ef.js'></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie TV - Watch & Download Latest HD Movies</title>
    
    <!-- SEO and Meta Tags -->
    <meta name="google-site-verification" content="1mDUrmtjTiKfrYayJONYnzIhgBQcw30UZi0Q1hdhAO4" />
    <meta name="title" content="Movie TV - Watch & Download Latest HD Movies">
    <meta name="description" content="Explore and download a vast collection of the latest and classic movies in HD. Find your favorite action, comedy, horror, and romantic films easily and for free.">
    <meta name="keywords" content="movie downloader, latest movies, hd movies, download movies, free movies, action movies, comedy, horror, romantic, movie apps, upcoming movies, movie reviews">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://hindimovie.netlify.app/" />
    
    <!-- Google Fonts for Professional Look -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
    
    <!-- Open Graph / Facebook Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://hindimovie.netlify.app/">
    <meta property="og:title" content="Movie TV - Watch & Download Latest HD Movies">
    <meta property="og:description" content="Explore and download a vast collection of the latest and classic movies in HD.">
    <meta property="og:image" content="https://i.postimg.cc/0yCyzmhm/IMG-20250730-220406.jpg" id="og-image-meta">
    
    <!-- Twitter Meta Tags -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://hindimovie.netlify.app/">
    <meta property="twitter:title" content="Movie TV - Watch & Download Latest HD Movies">
    <meta property="twitter:description" content="Explore and download a vast collection of the latest and classic movies in HD.">
    <meta property="twitter:image" content="https://i.postimg.cc/0yCyzmhm/IMG-20250730-220406.jpg" id="twitter-image-meta">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    
    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Movie TV",
      "url": "https://hindimovie.netlify.app/",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://hindimovie.netlify.app/#search={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>

    <style>
        html{scroll-behavior:smooth}body{margin:0;padding:20px;font-family:Arial,sans-serif;background-color:#111;color:#fff;overflow-x:hidden}body.loading{overflow:hidden}body.loading>*:not(#loader){display:none}header{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background-color:#1a1a1a;box-shadow:0 2px 10px rgba(0,0,0,.5);border-bottom:2px solid orange}
        header h1{font-family:'Montserrat',sans-serif;font-size:30px;font-weight:700;margin:0;letter-spacing:1.5px;background:linear-gradient(45deg,#ffc107,#ff8c00);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;text-shadow:2px 2px 4px rgba(0,0,0,.2)}
        .category-filters{text-align:center;margin:20px 0;display:flex;justify-content:center;flex-wrap:wrap;gap:8px;padding:0 10px}.category-filters button{background-color:#333;color:orange;border:none;padding:10px 20px;border-radius:5px;cursor:pointer;font-size:14px;transition:background-color .3s ease;white-space:nowrap}.category-filters button:hover{background-color:#555}.category-filters button.active{background-color:orange;color:#000}#search-bar{margin:20px auto;max-width:600px;display:block;width:100%;padding:10px;background-color:#222;color:#fff;border:none;border-radius:6px;font-size:16px}.movie-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;max-width:600px;margin:20px auto}.movie-card{background-color:#222;border-radius:10px;overflow:hidden;transition:transform .2s;position:relative}.movie-card:hover{transform:scale(1.03)}.movie-card img{width:100%;height:280px;object-fit:cover;display:block;cursor:pointer}.movie-title{padding:10px;text-align:center;font-weight:700}.more-options-btn{position:absolute;top:8px;right:8px;font-size:24px;cursor:pointer;color:orange;background:0 0;border:none;padding:2px 8px;line-height:1;z-index:10}.options-menu{display:none;position:absolute;top:35px;right:8px;background-color:#333;border-radius:5px;box-shadow:0 2px 5px rgba(0,0,0,.7);z-index:11;padding:5px 0;min-width:120px;text-align:left}.options-menu a{display:block;padding:8px 15px;color:#fff;text-decoration:none;font-size:14px;transition:background-color .2s}.options-menu a:hover{background-color:#555}#savedPostsModal .modal-content{background-color:#222;text-align:left;max-width:600px;padding:20px}#savedPostsModal h2{color:orange;text-align:center;margin-bottom:20px}#savedPostsModal .thumbnails-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:10px}#savedPostsModal .thumbnail-item{position:relative;cursor:pointer;border-radius:5px;overflow:hidden;transition:transform .2s,box-shadow .2s}#savedPostsModal .thumbnail-item:hover{transform:scale(1.05);box-shadow:0 0 15px orange}#savedPostsModal .thumbnail-item img{width:100%;height:120px;object-fit:cover;display:block}#savedPostsModal .thumbnail-item .title{position:absolute;bottom:0;left:0;right:0;background-color:rgba(0,0,0,.7);color:#fff;font-size:12px;padding:5px;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#savedPostsModal .remove-saved{position:absolute;top:2px;right:2px;cursor:pointer;color:red;font-size:18px;background:rgba(0,0,0,.5);border-radius:50%;width:22px;height:22px;line-height:22px;text-align:center;z-index:10}#savedPostsModal .no-posts{text-align:center;color:#ccc;padding:20px}.modal{display:none;position:fixed;z-index:9999;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.7)}.modal-content{background-color:#222;margin:10% auto;padding:20px;border-radius:10px;width:90%;max-width:450px;text-align:center}.modal-content img{max-width:250px;height:auto;border-radius:10px;display:block;margin:0 auto 15px}.movie-details p{color:#aaa;margin:5px 0;font-size:14px;text-align:left;padding:0 10px}.movie-details strong{color:orange}.movie-description{font-size:14px;color:#ccc;line-height:1.5;margin-top:10px;margin-bottom:20px;text-align:left;padding:0 10px}.modal-content h3{margin:15px 0;color:orange}.modal-content a{display:inline-block;padding:10px 20px;background-color:orange;color:#000;text-decoration:none;font-weight:700;border-radius:5px;margin-top:10px}.modal-content a:hover{background-color:darkorange}.close{float:right;font-size:28px;font-weight:bold;color:#fff;cursor:pointer}.close:hover{color:#ccc}#loader{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.8);display:flex;justify-content:center;align-items:center;z-index:10000;flex-direction:column}.spinner{border:6px solid #f3f3f3;border-top:6px solid orange;border-radius:50%;width:50px;height:50px;animation:spin 1s linear infinite;margin-bottom:20px}#loader p{color:orange;font-size:18px;margin:0}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.privacy-policy{max-width:800px;margin:40px auto;padding:30px;background-color:#222;border-radius:10px;color:#fff;line-height:1.6;box-shadow:0 4px 15px rgba(0,0,0,.5); display: none;}.footer-links{text-align:center;margin-top:30px;margin-bottom:20px}.footer-links a{color:orange;text-decoration:none;margin:0 10px;font-size:16px}.footer-links a:hover{text-decoration:underline}.movie-views{display:flex;justify-content:center;padding:5px 0;font-size:12px;color:#bbb;border-top:1px solid #333;margin-top:5px}.movie-views p{margin:0;display:flex;align-items:center;gap:5px}.movie-actions{text-align:center;padding:8px 0;border-top:1px solid #333;margin-top:5px}.like-btn{background:0 0;border:none;color:#fff;font-size:16px;cursor:pointer;display:flex;align-items:center;gap:5px;margin:0 auto;padding:5px 10px;border-radius:5px;transition:background-color .3s ease,color .3s ease}.like-btn:hover{background-color:#333}.like-btn.liked{color:red}.movie-stats{display:flex;justify-content:space-around;align-items:center;padding:8px 0;border-top:1px solid #333;margin-top:5px;font-size:14px}.download-buttons{display:flex;flex-direction:column;align-items:stretch;gap:10px;margin-top:20px}.download-buttons a{display:flex;align-items:center;justify-content:center;padding:12px 15px;color:#fff;text-decoration:none;font-weight:700;border-radius:8px;transition:background-color .3s ease;font-size:16px;gap:8px}.download-buttons a.watch-button{background-color:#d9534f}.download-buttons a.watch-button:hover{background-color:#c9302c}.download-buttons a.download-button{background-color:#5cb85c}.download-buttons a.download-button:hover{background-color:#4cae4c}#app-install-banner{position:fixed;bottom:0;left:0;width:100%;background-color:#1a1a1a;box-shadow:0 -2px 10px rgba(0,0,0,.5);z-index:1001;padding:15px;box-sizing:border-box;display:none;align-items:center;justify-content:space-between;gap:15px}.app-info{display:flex;align-items:center;gap:15px}.app-icon{width:50px;height:50px;border-radius:10px}.app-text{color:#fff}.app-text h4{margin:0 0 5px 0;color:orange}.app-text p{margin:0;font-size:14px;color:#ccc}.banner-actions{display:flex;align-items:center;gap:15px}.download-app-btn{background-color:orange;color:#111;padding:8px 16px;border-radius:5px;text-decoration:none;font-weight:700;font-size:14px;white-space:nowrap}.close-banner-btn{font-size:24px;color:#888;cursor:pointer;background:0 0;border:none}
        .header-actions{display:flex;align-items:center}.header-icon-btn{background:0 0;border:none;cursor:pointer;padding:5px;line-height:0}.header-icon-btn svg{width:28px;height:28px;fill:#fff;transition:opacity .2s}.header-icon-btn:hover svg{opacity:.8}.side-menu{position:fixed;top:0;right:-230px;width:220px;height:100%;background-color:#1f1f1f;box-shadow:-5px 0 15px rgba(0,0,0,.5);z-index:10001;transition:right .4s ease-in-out;padding:20px;box-sizing:border-box;display:flex;flex-direction:column}.side-menu.open{right:0}.side-menu .menu-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #444;padding-bottom:15px;margin-bottom:15px}.side-menu .menu-header h2{color:orange;margin:0;font-size:22px}.side-menu .close-menu-btn{font-size:30px;color:#fff;background:0 0;border:none;cursor:pointer}.side-menu nav a{color:#e0e0e0;text-decoration:none;padding:15px;font-size:18px;display:flex;align-items:center;gap:15px;border-radius:8px;transition:background-color .2s}.side-menu nav a:hover{background-color:#333}.side-menu nav a svg{flex-shrink:0}
        .user-message-container { margin: 15px 0; padding: 10px; border: 1px dashed orange; border-radius: 8px; background-color: #2a2a2a; }
        .user-message { margin: 5px 0; padding: 0; font-size: 14px; color: #f0f0f0; line-height: 1.5; text-align: left; }
    </style>
</head>
<body>
    <header>
        <h1>🎬 Movie TV</h1>
        <div class="header-actions">
            <button id="menu-btn" class="header-icon-btn" title="Open Menu">
                <svg xmlns="http://www.w3.org/2000/svg" height="28px" viewBox="0 0 24 24" width="28px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
            </button>
        </div>
    </header>
  
    <div id="side-menu" class="side-menu">
        <div class="menu-header">
            <h2>Menu</h2>
            <button class="close-menu-btn" title="Close Menu">×</button>
        </div>
        <nav>
            <a href="#" id="menu-saved-list-btn">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#e0e0e0"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-3 10.5l-2.5-1.5L13 14.5V4h5v10.5z"/></svg>
                <span>Saved List</span>
            </a>
        </nav>
    </div>

    <div id="app-install-banner">
        <div class="app-info"><img src="" alt="App Icon" class="app-icon" id="app-icon-img"><div class="app-text"><h4>Movie TV App</h4><p>Get a better experience with our app.</p></div></div>
        <div class="banner-actions"><a href="#" id="download-app-link" class="download-app-btn" target="_blank">Download App</a><button id="close-banner" class="close-banner-btn">×</button></div>
    </div>

    <div class="category-filters">
      <button onclick="filterByCategory('all', event)" class="active">All</button>
      <button onclick="filterByCategory('latest movie', event)">Latest Movie</button>
      <button onclick="filterByCategory('action', event)">Action</button>
      <button onclick="filterByCategory('comedy', event)">Comedy</button>
      <button onclick="filterByCategory('horror', event)">Horror</button>
      <button onclick="filterByCategory('romantic', event)">Romantic</button>
      <button onclick="filterByCategory('upcoming', event)">Upcoming Movie</button>
    </div>

    <div id="savedPostsModal" class="modal"><div class="modal-content"><span class="close" onclick="closeModal('savedPostsModal')">×</span><h2>📚 Saved Posts</h2><div class="thumbnails-container" id="saved-posts-list"></div><div class="no-posts" id="no-saved-posts-message" style="display: none;">No saved posts yet.</div></div></div>
    <input type="text" id="search-bar" placeholder="🔍 Search movies by title..." onkeyup="filterMovies()">
    <div id="viewerModal" class="modal"><div class="modal-content" id="viewerContent"></div></div>
    <div id="loader"><div class="spinner"></div><p>Loading Movies...</p></div>
    <div class="movie-grid" id="movie-grid"></div>
    <div id="privacy-policy-section" class="privacy-policy"></div>
    <div class="footer-links"><a href="#" onclick="showPrivacyPolicy(event)">Privacy Policy</a> | <a href="#">Terms of Service</a><p style="margin-top: 10px;">© 2025 Movie TV. All Rights Reserved.</p></div>

<script>
    const firebaseConfig = {
      apiKey: "AIzaSyD-tlrPK8s9h87PVqtvprBy_phcCqONLeU",
      authDomain: "my-movie-81a4b.firebaseapp.com",
      databaseURL: "https://my-movie-81a4b-default-rtdb.firebaseio.com",
      projectId: "my-movie-81a4b",
      storageBucket: "my-movie-81a4b.firebasestorage.app",
      messagingSenderId: "249876555391",
      appId: "1:249876555391:web:81f3ad52805b0aa314c14a",
      measurementId: "G-RHPWTHQHS2"
    };
    firebase.initializeApp(firebaseConfig);

    //============== নতুন এবং উন্নত ট্র্যাকিং কোড শুরু ==============//
    function logVisitorAnalytics() {
        // একই সেশনে যেন বারবার ডেটা না পাঠায়, তার জন্য এই চেকিং
        if (sessionStorage.getItem('visitorLogged')) {
            return;
        }
    
        const referrer = document.referrer;
        let source = 'Direct'; // যদি কোনো সোর্স না থাকে, তবে ডিফল্ট 'Direct'
    
        if (referrer) {
            try {
                // URL অবজেক্ট ব্যবহার করে সঠিকভাবে হোস্টনেইম বের করা হচ্ছে
                let hostname = new URL(referrer).hostname;
                // সাধারণ সাবডোমেইন (www, m, l) বাদ দেওয়া হচ্ছে, যাতে সোর্স গ্রুপ করা সহজ হয়
                hostname = hostname.replace(/^(www\.|m\.|l\.)/, '');
                source = hostname;
            } catch (e) {
                // যদি রেফারার কোনো অ্যাপ বা অবৈধ লিঙ্ক হয়
                source = 'Other/App';
            }
        }
    
        const analyticsData = {
            source: source,
            timestamp: firebase.database.ServerValue.TIMESTAMP
        };
    
        // লোকেশন ডেটা আলাদাভাবে আনা হচ্ছে, যাতে মূল ট্র্যাকিং ব্লক না হয়
        fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                analyticsData.country = data.country_name || 'Unknown';
                // সম্পূর্ণ ডেটা Firebase-এ পাঠানো হচ্ছে
                database.ref('analytics/visits').push(analyticsData);
                sessionStorage.setItem('visitorLogged', 'true');
            }).catch(error => {
                console.error('Error fetching visitor location:', error);
                // যদি লোকেশন পেতে সমস্যা হয়, তবুও সোর্স ডেটা পাঠানো হবে
                analyticsData.country = 'Unknown';
                database.ref('analytics/visits').push(analyticsData);
                sessionStorage.setItem('visitorLogged', 'true');
            });
    }
    //============== নতুন এবং উন্নত ট্র্যাকিং কোড শেষ ==============//


    const database = firebase.database();
    const moviesRef = database.ref('movies');
    const settingsRef = database.ref('siteSettings');

    let allMovieData = {};
    let currentCategoryFilter = 'all';
    let lastClickedMovieSlug = null;
    let siteSettings = {};

    document.addEventListener('DOMContentLoaded', () => {
        // নতুন ট্র্যাকিং ফাংশন চালু করা হচ্ছে
        logVisitorAnalytics();

        document.body.classList.add('loading');
        
        const defaultSettings = {
            appIconUrl: 'https://i.ibb.co/6gT26t3/og-image.jpg',
            appDownloadUrl: '#',
            mainOgImageUrl: 'https://i.ibb.co/6gT26t3/og-image.jpg',
            bengaliMessage: '',
            hindiMessage: ''
        };

        settingsRef.once('value').then(settingsSnapshot => {
            siteSettings = { ...defaultSettings, ...settingsSnapshot.val() };
            document.getElementById('app-icon-img').src = siteSettings.appIconUrl;
            document.getElementById('download-app-link').href = siteSettings.appDownloadUrl;
            
            resetMetaTagsToHome();
            setupAppBanner();
            loadAndDisplayMovies();
        }).catch(error => {
            console.error("Error fetching settings:", error);
            siteSettings = defaultSettings;
            resetMetaTagsToHome();
            setupAppBanner();
            loadAndDisplayMovies();
        });

        setupMenuControls();
    });
    
    // बाकी सब কোড অপরিবর্তিত
    function setupAppBanner(){const e=document.getElementById("app-install-banner"),t=document.getElementById("close-banner");e&&t&&(setTimeout(()=>{e.style.display="flex"},5e3),t.addEventListener("click",()=>{e.style.display="none"}))}function setupMenuControls(){const e=document.getElementById("menu-btn"),t=document.getElementById("side-menu"),n=t.querySelector(".close-menu-btn"),o=document.getElementById("menu-saved-list-btn");e.addEventListener("click",()=>t.classList.add("open")),n.addEventListener("click",()=>t.classList.remove("open")),o.addEventListener("click",e=>{e.preventDefault(),showSavedPosts(),t.classList.remove("open")})}function showMainContent(e){document.querySelector("header").style.display=e?"flex":"none",document.querySelector(".category-filters").style.display=e?"flex":"none",document.querySelector("#search-bar").style.display=e?"block":"none",document.querySelector(".movie-grid").style.display=e?"grid":"none",document.querySelector(".footer-links").style.display=e?"block":"none",document.getElementById("privacy-policy-section").style.display="none"}function closeModal(e){if(document.getElementById(e).style.display="none",showMainContent(!0),"viewerModal"===e){if(lastClickedMovieSlug){const e=document.querySelector(`.movie-card[data-slug='${lastClickedMovieSlug}']`);e&&e.scrollIntoView({behavior:"smooth",block:"center"})}lastClickedMovieSlug=null,window.history.pushState({},"","/")/resetMetaTagsToHome()}}function showSavedPosts(){const e=document.getElementById("savedPostsModal"),t=document.getElementById("saved-posts-list"),n=document.getElementById("no-saved-posts-message");t.innerHTML="";let o=!1;for(let s=0;s<localStorage.length;s++){const i=localStorage.key(s);if(i.startsWith("savedMovie_")){o=!0;const s=JSON.parse(localStorage.getItem(i)),a=document.createElement("div");a.className="thumbnail-item",a.innerHTML=`<img src="${s.image}" alt="${s.title}"><div class="title">${s.title}</div><span class="remove-saved" onclick="removeSavedPost(event, '${i}')">×</span>`,a.onclick=()=>{closeModal("savedPostsModal"),openViewer(createSlug(s.title))},t.appendChild(a)}}n.style.display=o?"none":"block",t.style.display=o?"grid":"none",showMainContent(!1),e.style.display="block"}function loadAndDisplayMovies(){moviesRef.once("value",e=>{document.body.classList.remove("loading"),document.getElementById("loader").style.display="none";const t=[];e.forEach(e=>{t.push({key:e.key,...e.val()})}),t.sort((e,t)=>(t.timestamp||0)-(e.timestamp||0)),t.forEach(e=>{e.slug=createSlug(e.title),allMovieData[e.slug]=e,addMovieCard(e)}),filterMovies(),handleDirectUrlAccess()})}function resetMetaTagsToHome(){const e="Movie TV - Watch & Download Latest HD Movies",t="Explore and download a vast collection of the latest and classic movies in HD.",n=window.location.origin+"/";updateMetaTags(e,t,siteSettings.mainOgImageUrl,n)}function updateMetaTags(e,t,n,o){document.title=e,document.querySelector('meta[name="title"]').setAttribute("content",e),document.querySelector('meta[name="description"]').setAttribute("content",t),document.querySelector('link[rel="canonical"]').setAttribute("href",o),document.querySelector('meta[property="og:title"]').setAttribute("content",e),document.querySelector('meta[property="og:description"]').setAttribute("content",t),document.getElementById("og-image-meta").setAttribute("content",n),document.querySelector('meta[property="og:url"]').setAttribute("content",o),document.querySelector('meta[property="twitter:title"]').setAttribute("content",e),document.querySelector('meta[property="twitter:description"]').setAttribute("content",t),document.getElementById("twitter-image-meta").setAttribute("content",n),document.querySelector('meta[property="twitter:url"]').setAttribute("content",o)}function createSlug(e){return e?e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""):""}function escapeQuotes(e){return"string"!=typeof e?"":e.replace(/'/g,"\\'").replace(/"/g,'\\"')}function addMovieCard(e){const{key:t,title:n,image:o,slug:s,category:a,viewCount:i,likeCount:r}=e,c=document.createElement("div");c.className="movie-card",c.setAttribute("data-key",t),c.setAttribute("data-title",n.toLowerCase()),c.setAttribute("data-category",(a||"other").toLowerCase()),c.setAttribute("data-slug",s),c.innerHTML=`<button class="more-options-btn" onclick="toggleOptionsMenu(event)">…</button><div class="options-menu" id="options-menu-${t}"><a href="#" onclick="savePostToLocalStorage(event, '${t}', '${escapeQuotes(n)}', '${escapeQuotes(o)}', '${escapeQuotes(e.link)}', '${escapeQuotes(e.link2)}', '${escapeQuotes(e.link3)}', '${escapeQuotes(a)}')">Save Post</a></div><div class="movie-content-wrapper"><img src="${o}" alt="${n}"></div><div class="movie-title">${n}</div><div style="text-align:center; font-size: 14px; color: orange;">[${a||"Other"}]</div><div class="movie-stats"><div class="movie-views"><p>👁️ <span id="views-${t}">${i||0}</span></p></div><div class="movie-actions"><button class="like-btn" title="Like Movie" onclick="toggleLike(event, '${t}')"><span class="heart-icon">♡</span> <span id="likes-${t}">${r||0}</span></button></div></div>`;const d=c.querySelector(".like-btn"),l=d.querySelector(".heart-icon");localStorage.getItem(`likedMovie_${t}`)&&(d.classList.add("liked"),l.innerHTML="❤️"),c.querySelector(".movie-content-wrapper").addEventListener("click",()=>{lastClickedMovieSlug=s,openViewer(s)}),document.getElementById("movie-grid").appendChild(c),database.ref(`movies/${t}/viewCount`).on("value",e=>{const n=document.getElementById(`views-${t}`);n&&(n.innerText=e.val()||0)}),database.ref(`movies/${t}/likeCount`).on("value",e=>{const n=document.getElementById(`likes-${t}`);n&&(n.innerText=e.val()||0)})}function handleDirectUrlAccess(){const e=window.location.pathname;e.startsWith("/movie/")&&allMovieData[e.substring(7)]?openViewer(e.substring(7),!0):(window.history.replaceState({},"","/"),resetMetaTagsToHome())}function openViewer(e,t=!1){const n=allMovieData[e];if(!n)return;const{key:o,title:s,image:a,link:i,link2:r,link3:d,category:l,description:c,director:u,cast:p,releaseDate:m}=n;let g="";(siteSettings.bengaliMessage||siteSettings.hindiMessage)&&(g+=`<div class="user-message-container">${siteSettings.bengaliMessage?`<p class="user-message">${siteSettings.bengaliMessage}</p>`:""}${siteSettings.hindiMessage?`<p class="user-message">${siteSettings.hindiMessage}</p>`:""}</div>`);let h="";i&&(h+=`<a href="${i}" target="_blank" class="watch-button">▶️ Watch Now</a>`),r&&(h+=`<a href="${r}" target="_blank" class="download-button">Watch 720p</a>`),d&&(h+=`<a href="${d}" target="_blank" class="download-button">Watch 360p</a>`),h+='<a href="#" id="share-btn" class="download-button" style="background-color:#007bff; display: flex; align-items: center; justify-content: center; gap: 8px;"><svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 0 24 24" width="20px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3z"/></svg><span>Share</span></a>';const y=document.getElementById("viewerContent");y.innerHTML=`<span class="close" onclick="closeModal('viewerModal')">×</span><img src="${a}" alt="${s}"><h3>${s}</h3><div class="movie-details">${u?`<p><strong>Director:</strong> ${u}</p>`:""}${p?`<p><strong>Cast:</strong> ${p}</p>`:""}${m?`<p><strong>Release Date:</strong> ${m}</p>`:""}<p><strong>Genre:</strong> ${l||"N/A"}</p></div><p class="movie-description">${c||"No description available."}</p>${g}<div class="download-buttons">${h}</div>`,showMainContent(!1),document.getElementById("viewerModal").style.display="block";const w=`${window.location.origin}/movie/${e}`,v=`${s}`,f="Watch & Download Latest HD Movies";window.history.pushState({slug:e},v,w),updateMetaTags(v,f,a,w),t||database.ref("movies/"+o+"/viewCount").transaction(e=>(e||0)+1),document.getElementById("share-btn")?.addEventListener("click",e=>{e.preventDefault(),navigator.share?navigator.share({title:s,text:f,url:window.location.href}):navigator.clipboard.writeText(window.location.href).then(()=>alert("Share link copied to clipboard!"))})}function filterMovies(){const e=document.getElementById("search-bar").value.toLowerCase();document.querySelectorAll(".movie-card").forEach(t=>{const n=t.getAttribute("data-title"),o=t.getAttribute("data-category"),s=n.includes(e);let a;a="upcoming"===currentCategoryFilter?o==="upcoming":"all"===currentCategoryFilter?"upcoming"!==o:o.includes(currentCategoryFilter)&&"upcoming"!==o,t.style.display=s&&a?"block":"none"})}function filterByCategory(e,t){currentCategoryFilter=e.toLowerCase(),document.querySelectorAll(".category-filters button").forEach(e=>e.classList.remove("active")),t.target.classList.add("active"),filterMovies()}window.onclick=function(e){if(e.target.classList.contains("modal"))closeModal(e.target.id);const t=document.getElementById("side-menu"),n=document.getElementById("menu-btn");t.classList.contains("open")&&!t.contains(e.target)&&!n.contains(e.target)&&t.classList.remove("open"),document.querySelectorAll(".options-menu").forEach(t=>{t.style.display==="block"&&!t.contains(e.target)&&!e.target.classList.contains("more-options-btn")&&(t.style.display="none")})},window.onpopstate=function(e){closeModal("viewerModal")};function toggleLike(e,t){e.stopPropagation();const n=`likedMovie_${t}`,o=e.currentTarget;if(!o.classList.contains("liked")){o.classList.add("liked");const e=o.querySelector(".heart-icon");e&&(e.innerHTML="❤️"),localStorage.setItem(n,"true"),database.ref(`movies/${t}/likeCount`).transaction(e=>(e||0)+1)}}function toggleOptionsMenu(e){e.stopPropagation();const t=e.target.nextElementSibling,n="block"===t.style.display;document.querySelectorAll(".options-menu").forEach(e=>e.style.display="none"),t.style.display=n?"none":"block"}function savePostToLocalStorage(e,t,n,o,s,a,i,r){e.preventDefault();const c={key:t,title:n,image:o,link:s,link2:a,link3:i,category:r};localStorage.setItem(`savedMovie_${t}`,JSON.stringify(c)),alert(`"${n}" has been saved!`),e.target.closest(".options-menu").style.display="none"}function removeSavedPost(e,t){e.stopPropagation(),confirm("Are you sure you want to remove this post?")&&(localStorage.removeItem(t),e.target.parentElement.remove())}function showPrivacyPolicy(e){e.preventDefault();const t=document.getElementById("privacy-policy-section");t&&(t.innerHTML='<h2>Privacy Policy</h2><p>Your privacy is important to us. This is a sample policy.</p><button onclick="closeModal(\'privacy-policy-section\')">Close</button>',showMainContent(!1),t.style.display="block")}
</script>

</body>
                </html>
