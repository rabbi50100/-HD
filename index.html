<!DOCTYPE html>
<html lang="en">
<head>
    <!-- =================================================== -->
    <!-- ============== SEO ‡¶è‡¶¨‡¶Ç ‡¶Æ‡ßá‡¶ü‡¶æ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶∂‡ßÅ‡¶∞‡ßÅ ============== -->
    <!-- =================================================== -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Google Site Verification -->
    <meta name="google-site-verification" content="B1rZFk2kRVgKylnnu5P0AWYam1LLtMWY95mDaIz2mOM" />

    <!-- Primary Meta Tags -->
    <title>Movie TV - Watch & Download Latest HD Movies</title>
    <meta name="title" content="Movie Apps - Watch & Download Latest HD Movies">
    <meta name="description" content="Explore and download a vast collection of the latest and classic movies in HD. Find your favorite action, comedy, horror, and romantic films easily and for free.">
    <meta name="keywords" content="movie downloader, latest movies, hd movies, download movies, free movies, action movies, comedy, horror, romantic, movie apps">

    <!-- Robots Meta Tag -->
    <meta name="robots" content="index, follow">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://rabbi50100.github.io/-HD/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://rabbi50100.github.io/-HD/">
    <meta property="og:title" content="Movie Apps - Watch & Download Latest HD Movies">
    <meta property="og:description" content="Explore and download a vast collection of the latest and classic movies in HD. Find your favorite action, comedy, horror, and romantic films easily and for free.">
    <meta property="og:image" content="https://rabbi50100.github.io/-HD/og-image.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://rabbi50100.github.io/-HD/">
    <meta property="twitter:title" content="Movie Apps - Watch & Download Latest HD Movies">
    <meta property="twitter:description" content="Explore and download a vast collection of the latest and classic movies in HD. Find your favorite action, comedy, horror, and romantic films easily and for free.">
    <meta property="twitter:image" content="https://rabbi50100.github.io/-HD/og-image.jpg">

    <!-- ================================================= -->
    <!-- ============== SEO ‡¶è‡¶¨‡¶Ç ‡¶Æ‡ßá‡¶ü‡¶æ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶∂‡ßá‡¶∑ ============== -->
    <!-- ================================================= -->


    <!-- --- Firebase SDK --- -->
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>

    <!-- Ad Scripts -->
    <script type='text/javascript' src='//pl27240886.profitableratecpm.com/d0/01/48/d001486b77c50cc7955b8de7fa77722a.js'></script>
    <script type='text/javascript' src='//pl25592823.profitableratecpm.com/5a/44/f3/5a44f3953acebff68b2ef494fac71fea.js'></script>
    
    <!-- JSON-LD Schema for Website -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Movie Apps",
      "url": "https://rabbi50100.github.io/-HD/",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://rabbi50100.github.io/-HD/#search={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>

  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: Arial, sans-serif;
      background-color: #111;
      color: #fff;
      overflow-x: hidden;
    }

    body.loading {
        overflow: hidden;
    }

    body.loading > *:not(#loader) {
        display: none;
    }

    /* --- Professional Header Styling --- */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px; /* ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶è‡¶∞ ‡¶ö‡¶æ‡¶∞‡¶™‡¶æ‡¶∂‡ßá ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç */
      background-color: #1a1a1a; /* ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶ó‡¶æ‡ßù ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° */
      box-shadow: 0 2px 10px rgba(0,0,0,0.5); /* ‡¶∏‡¶æ‡¶Æ‡¶æ‡¶®‡ßç‡¶Ø ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã */
      border-bottom: 2px solid orange; /* ‡¶®‡¶ø‡¶ö‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡¶∞‡ßá‡¶û‡ßç‡¶ú ‡¶≤‡¶æ‡¶á‡¶® */
    }

    header h1 {
      color: orange;
      font-size: 28px; /* ‡¶´‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶Ü‡¶ï‡¶æ‡¶∞ ‡¶¨‡ßú ‡¶ï‡¶∞‡¶æ */
      font-weight: bold; /* ‡¶Æ‡ßã‡¶ü‡¶æ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞ */
      margin: 0; /* ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶® ‡¶∏‡¶∞‡¶æ‡¶®‡ßã */
      letter-spacing: 1px; /* ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶∏‡¶æ‡¶Æ‡¶æ‡¶®‡ßç‡¶Ø ‡¶´‡¶æ‡¶Å‡¶ï‡¶æ ‡¶∏‡ßç‡¶•‡¶æ‡¶® */
      text-shadow: 0 0 5px rgba(255,165,0,0.7); /* ‡¶Ö‡¶∞‡ßá‡¶û‡ßç‡¶ú ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã */
    }

    /* --- Category Filter Styling --- */
    .category-filters {
      text-align: center;
      margin: 20px 0;
      display: flex; /* Changed to flex for better alignment */
      justify-content: center; /* Center buttons */
      flex-wrap: wrap; /* Allow buttons to wrap on smaller screens */
      gap: 8px; /* Space between buttons */
      padding: 0 10px; /* Add padding for smaller screens */
    }
    .category-filters button {
      background-color: #333;
      color: orange;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px; /* Slightly smaller font for buttons */
      transition: background-color 0.3s ease;
      white-space: nowrap; /* Prevent text from wrapping */
    }
    .category-filters button:hover {
      background-color: #555;
    }
    .category-filters button.active {
      background-color: orange;
      color: black;
    }

    /* --- Saved Posts Button Styling --- */
    #saved-posts-button {
      font-size: 16px;
      cursor: pointer;
      color: orange;
      border: 1px solid orange;
      background: none;
      padding: 8px 15px;
      border-radius: 5px;
      transition: background-color 0.3s ease, color 0.3s ease;
      font-weight: bold;
    }

    #saved-posts-button:hover {
      background-color: orange;
      color: #1a1a1a;
    }


    #search-bar {
      margin: 20px auto;
      max-width: 600px;
      display: block;
      width: 100%;
      padding: 10px;
      background-color: #222;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 16px;
    }

    .movie-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      max-width: 600px;
      margin: 20px auto;
    }

    .movie-card {
      background-color: #222;
      border-radius: 10px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.2s;
      position: relative;
    }

    .movie-card:hover {
      transform: scale(1.03);
    }

    .movie-card img {
      width: 100%;
      height: 280px;
      object-fit: cover;
      display: block;
    }

    .movie-title {
      padding: 10px;
      text-align: center;
      font-weight: bold;
    }

    .more-options-btn {
        position: absolute;
        top: 8px;
        right: 8px; /* Positioned at the top-right corner */
        font-size: 24px; /* Larger size for the three dots */
        cursor: pointer;
        color: orange; /* Make the dots stand out */
        background: none;
        border: none;
        padding: 2px 8px; /* Adjust padding */
        line-height: 1; /* Ensure proper vertical alignment */
        z-index: 10;
    }

    .options-menu {
        display: none;
        position: absolute;
        top: 35px; /* Position below the button */
        right: 8px;
        background-color: #333;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.7);
        z-index: 11;
        padding: 5px 0;
        min-width: 120px;
        text-align: left;
    }

    .options-menu a {
        display: block;
        padding: 8px 15px;
        color: white;
        text-decoration: none;
        font-size: 14px;
        transition: background-color 0.2s;
    }

    .options-menu a:hover {
        background-color: #555;
    }

    #savedPostsModal .modal-content {
        background-color: #222;
        text-align: left;
        max-width: 600px;
        padding: 20px;
    }
    #savedPostsModal h2 {
        color: orange;
        text-align: center;
        margin-bottom: 20px;
    }
    #savedPostsModal .thumbnails-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: 10px;
    }
    #savedPostsModal .thumbnail-item {
        position: relative;
        cursor: pointer;
        border-radius: 5px;
        overflow: hidden;
        transition: transform 0.2s, box-shadow 0.2s;
    }
    #savedPostsModal .thumbnail-item:hover {
        transform: scale(1.05);
        box-shadow: 0 0 15px orange;
    }
    #savedPostsModal .thumbnail-item img {
        width: 100%;
        height: 120px;
        object-fit: cover;
        display: block;
    }
    #savedPostsModal .thumbnail-item .title {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: rgba(0,0,0,0.7);
        color: white;
        font-size: 12px;
        padding: 5px;
        text-align: center;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    #savedPostsModal .remove-saved {
        position: absolute;
        top: 2px;
        right: 2px;
        cursor: pointer;
        color: red;
        font-size: 18px;
        background: rgba(0,0,0,0.5);
        border-radius: 50%;
        width: 22px;
        height: 22px;
        line-height: 22px;
        text-align: center;
        z-index: 10;
    }
    #savedPostsModal .no-posts {
        text-align: center;
        color: #ccc;
        padding: 20px;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.7);
    }

    .modal-content {
      background-color: #222;
      margin: 10% auto;
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 400px;
      text-align: center;
    }

    .modal-content img {
      width: 100%;
      border-radius: 10px;
    }

    .modal-content h3 {
      margin: 15px 0;
      color: orange;
    }

    .modal-content a {
      display: inline-block;
      padding: 10px 20px;
      background-color: orange;
      color: black;
      text-decoration: none;
      font-weight: bold;
      border-radius: 5px;
      margin-top: 10px;
    }

    .modal-content a:hover {
      background-color: darkorange;
    }

    .close {
      float: right;
      font-size: 20px;
      color: white;
      cursor: pointer;
    }

    #loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 10000;
        flex-direction: column;
    }

    .spinner {
        border: 6px solid #f3f3f3;
        border-top: 6px solid orange;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 1s linear infinite;
        margin-bottom: 20px;
    }
    #loader p {
        color: orange;
        font-size: 18px;
        margin: 0;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .privacy-policy {
      max-width: 800px;
      margin: 40px auto;
      padding: 30px;
      background-color: #222;
      border-radius: 10px;
      color: #fff;
      line-height: 1.6;
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    }

    .privacy-policy h2 {
      color: orange;
      text-align: center;
      margin-bottom: 25px;
      border-bottom: 1px solid #444;
      padding-bottom: 10px;
    }

    .privacy-policy h3 {
      color: orange;
      margin-top: 25px;
      margin-bottom: 10px;
      border-bottom: 1px solid #333;
      padding-bottom: 5px;
    }

    .privacy-policy p, .privacy-policy ul {
      margin-bottom: 15px;
      color: #ccc;
    }

    .privacy-policy ul {
      list-style-type: disc;
      padding-left: 25px;
    }

    .privacy-policy li {
      margin-bottom: 8px;
    }

    .footer-links {
        text-align: center;
        margin-top: 30px;
        margin-bottom: 20px;
    }
    .footer-links a {
        color: orange;
        text-decoration: none;
        margin: 0 10px;
        font-size: 16px;
    }
    .footer-links a:hover {
        text-decoration: underline;
    }

    .movie-views {
        display: flex;
        justify-content: center;
        padding: 5px 0;
        font-size: 12px;
        color: #bbb;
        border-top: 1px solid #333;
        margin-top: 5px;
    }
    .movie-views p {
        margin: 0;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .movie-actions {
        text-align: center;
        padding: 8px 0;
        border-top: 1px solid #333;
        margin-top: 5px;
    }
    .like-btn {
        background: none;
        border: none;
        color: orange;
        font-size: 16px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
        margin: 0 auto;
        padding: 5px 10px;
        border-radius: 5px;
        transition: background-color 0.3s ease;
    }
    .like-btn:hover {
        background-color: #333;
    }
    .like-btn:active {
        color: red;
    }

    .movie-stats {
        display: flex;
        justify-content: space-around;
        align-items: center;
        padding: 8px 0;
        border-top: 1px solid #333;
        margin-top: 5px;
        font-size: 14px;
    }

    .download-buttons {
        display: flex;
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
        margin-top: 20px;
    }
    .download-buttons a {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 12px 15px;
        color: white;
        text-decoration: none;
        font-weight: bold;
        border-radius: 8px;
        transition: background-color 0.3s ease;
        font-size: 16px;
        gap: 8px;
    }
    .download-buttons a.watch-button {
        background-color: #d9534f;
    }
    .download-buttons a.watch-button:hover {
        background-color: #c9302c;
    }
    .download-buttons a.download-button {
        background-color: #5cb85c;
    }
    .download-buttons a.download-button:hover {
        background-color: #4cae4c;
    }

  </style>
</head>
<body>
  <header>
    <h1>üé¨ Movie TV</h1>
    <button id="saved-posts-button" title="Saved Posts">Saved List</button>
  </header>

  <div class="category-filters">
    <button onclick="filterByCategory('all', event)" class="active">All</button>
    <button onclick="filterByCategory('latest movie', event)">Latest Movie</button>
    <button onclick="filterByCategory('action', event)">Action</button>
    <button onclick="filterByCategory('comedy', event)">Comedy</button>
    <button onclick="filterByCategory('horror', event)">Horror</button>
    <button onclick="filterByCategory('romantic', event)">Romantic</button>
  </div>

  <div id="savedPostsModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('savedPostsModal')">√ó</span>
      <h2>üìö Saved Posts</h2>
      <div class="thumbnails-container" id="saved-posts-list"></div>
      <div class="no-posts" id="no-saved-posts-message" style="display: none;">No saved posts yet.</div>
    </div>
  </div>

  <input type="text" id="search-bar" placeholder="üîç Search movies by title..." onkeyup="filterMovies()">

  <div id="viewerModal" class="modal">
    <div class="modal-content" id="viewerContent"></div>
  </div>

  <div id="loader">
      <div class="spinner"></div>
      <p>Loading Movies...</p>
  </div>

  <div class="movie-grid" id="movie-grid"></div>

  <div id="privacy-policy-section" class="privacy-policy" style="display: none;">
    <h2>Privacy Policy</h2>
    <p>
      Welcome to Movie Downloader! Your privacy is important to us. This Privacy Policy outlines how we collect, use, disclose, and protect your information when you visit our website.
    </p>
    <h3>1. Information We Collect</h3>
    <p>
      We may collect certain information automatically, such as your IP address, browser type, operating system, referring URLs, and pages visited. We may also use cookies to enhance your experience and gather usage data.
    </p>
    <h3>2. How We Use Your Information</h3>
    <p>
      The information we collect is used to:
      <ul>
        <li>Provide, maintain, and improve our website services.</li>
        <li>Personalize your experience on our site.</li>
        <li>Respond to your inquiries and provide customer support.</li>
        <li>Monitor website usage and performance.</li>
      </ul>
    </p>
    <h3>3. Third-Party Services</h3>
    <p>
      We use Firebase for database and authentication. Their privacy practices are subject to their own policies. We may also integrate with third-party advertising networks, which may have their own data collection practices.
    </p>
    <h3>4. Contact Us</h3>
    <p>
      If you have any questions about this Privacy Policy, please contact us at [Your Contact Email/Link].
    </p>
  </div>

  <div class="footer-links">
      <a href="#privacy-policy-section" onclick="showPrivacyPolicy(event)">Privacy Policy</a> | <a href="#">Terms of Service</a>
      <p style="margin-top: 10px;">¬© 2025 Movie Downloader. All Rights Reserved.</p>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyD-tlrPK8s9h87PVqtvprBy_phcCqONLeU",
      authDomain: "my-movie-81a4b.firebaseapp.com",
      databaseURL: "https://my-movie-81a4b-default-rtdb.firebaseio.com",
      projectId: "my-movie-81a4b",
      storageBucket: "my-movie-81a4b.firebasestorage.app",
      messagingSenderId: "249876555391",
      appId: "1:249876555391:web:81f3ad52805b0aa314c14a",
      measurementId: "G-RHPWTHQHS2"
    };

    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const moviesRef = database.ref('movies');

    const movieGrid = document.getElementById('movie-grid');
    const loader = document.getElementById('loader');

    let allMovieElements = {};
    let currentCategoryFilter = 'all';

    function showPrivacyPolicy(e) {
      e.preventDefault();
      document.getElementById('privacy-policy-section').style.display = 'block';
      document.getElementById('search-bar').style.display = 'none';
      document.querySelector('.movie-grid').style.display = 'none';
      document.querySelector('header').style.display = 'none';
      document.querySelector('.category-filters').style.display = 'none';
    }

    document.addEventListener('DOMContentLoaded', () => {
        document.body.classList.add('loading');
    });

    moviesRef.orderByChild('timestamp').on('value', (snapshot) => {
        loader.style.display = 'none';
        document.body.classList.remove('loading');
        movieGrid.innerHTML = '';
        allMovieElements = {};

        const moviesArray = [];
        snapshot.forEach(childSnapshot => {
            moviesArray.push({ key: childSnapshot.key, ...childSnapshot.val() });
        });
        moviesArray.reverse();

        if (moviesArray.length > 0) {
            moviesArray.forEach(movieData => {
                const views = { viewCount: movieData.viewCount || 0 };
                const likes = { likeCount: movieData.likeCount || 0 };
                addMovieCard(movieData.key, movieData.title, movieData.image, movieData.link, movieData.link2, movieData.link3, movieData.category, views, likes);
            });
        } else {
             movieGrid.innerHTML = '<p style="text-align:center;">No movies found.</p>';
        }
    }, (error) => {
        loader.style.display = 'none';
        document.body.classList.remove('loading');
        console.error("Error loading movies: ", error);
        movieGrid.innerHTML = '<p style="text-align:center; color:red;">Error loading movies.</p>';
    });

    function addMovieCard(key, title, image, link, link2, link3, category = "Other", views, likes) {
      const card = document.createElement('div');
      card.className = 'movie-card';
      card.setAttribute('data-key', key);
      card.setAttribute('data-title', title.toLowerCase());
      card.setAttribute('data-category', (category || 'other').toLowerCase());

      card.innerHTML = `
        <button class="more-options-btn" onclick="toggleOptionsMenu(event)">‚Ä¶</button>
        <div class="options-menu" id="options-menu-${key}">
            <a href="#" onclick="savePostToLocalStorage(event, '${key}', '${escapeQuotes(title)}', '${escapeQuotes(image)}', '${escapeQuotes(link)}', '${escapeQuotes(link2)}', '${escapeQuotes(link3)}', '${escapeQuotes(category)}')">Save Post</a>
        </div>
        <div class="movie-content-wrapper" onclick="openViewer('${escapeQuotes(title)}', '${escapeQuotes(image)}', '${escapeQuotes(link)}', '${escapeQuotes(link2)}', '${escapeQuotes(link3)}', '${escapeQuotes(category)}')">
          <img src="${image}" alt="${title}">
        </div>
        <div class="movie-title">${title}</div>
        <div style="text-align:center; font-size: 14px; color: orange;">[${category}]</div>
        <div class="movie-stats">
          <div class="movie-views"><p>üëÅÔ∏è ${views.viewCount}</p></div>
          <div class="movie-actions"><button class="like-btn" title="Like Movie" onclick="toggleLike(event, '${key}')">‚ù§Ô∏è <span>${likes.likeCount}</span></button></div>
        </div>
      `;
      movieGrid.appendChild(card);
      allMovieElements[key] = card;
    }

    function escapeQuotes(str) {
        if (typeof str !== 'string') return '';
        return str.replace(/'/g, "\\'").replace(/"/g, '\\"');
    }

    function openViewer(title, image, link, link2, link3, category) {
      const viewerContent = document.getElementById('viewerContent');
      let viewerDownloadButtons = '';
      
      const escapedTitle = escapeQuotes(title);
      const escapedImage = escapeQuotes(image);
      const escapedLink = escapeQuotes(link);
      const escapedLink2 = escapeQuotes(link2);
      const escapedLink3 = escapeQuotes(link3);
      const escapedCategory = escapeQuotes(category);
      
      if (escapedLink) viewerDownloadButtons += `<a href="${escapedLink}" target="_blank" class="watch-button">‚ñ∂Ô∏è Watch Now</a>`;
      if (escapedLink2) viewerDownloadButtons += `<a href="${escapedLink2}" target="_blank" class="download-button">Download 720p</a>`;
      if (escapedLink3) viewerDownloadButtons += `<a href="${escapedLink3}" target="_blank" class="download-button">Download 360p</a>`;
      
      viewerContent.innerHTML = `
        <span class="close" onclick="closeModal('viewerModal')">√ó</span>
        <img src="${escapedImage}" alt="${escapedTitle}">
        <h3>${escapedTitle}</h3>
        <p style="color: #aaa;">Genre: <strong style="color: orange;">${escapedCategory}</strong></p>
        <div class="download-buttons">${viewerDownloadButtons}</div>
      `;
      document.getElementById('viewerModal').style.display = 'block';

      // SEO: ‡¶°‡¶æ‡¶á‡¶®‡¶æ‡¶Æ‡¶ø‡¶ï ‡¶Æ‡ßÅ‡¶≠‡¶ø ‡¶∏‡ßç‡¶ï‡¶ø‡¶Æ‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ
      const oldSchema = document.getElementById('movie-schema');
      if (oldSchema) oldSchema.remove();

      const schema = {
        "@context": "https://schema.org",
        "@type": "Movie",
        "name": title,
        "image": image,
        "genre": category,
        "url": window.location.href // ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® URL
      };
      const script = document.createElement('script');
      script.id = 'movie-schema';
      script.type = 'application/ld+json';
      script.text = JSON.stringify(schema);
      document.head.appendChild(script);

      // --- ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶ï‡ßã‡¶° ---
      const movieKey = Object.keys(allMovieElements).find(key => allMovieElements[key].querySelector('.movie-title').innerText === title);
      if (movieKey) {
          const movieRef = database.ref('movies/' + movieKey);
          movieRef.transaction(currentData => {
              if (currentData) {
                  currentData.viewCount = (currentData.viewCount || 0) + 1;
              }
              return currentData;
          });
      }
    }

    function closeModal(id) {
      document.getElementById(id).style.display = 'none';
    }

    window.onclick = function(event) {
      if (event.target.classList.contains('modal')) {
        event.target.style.display = "none";
      }
      const menus = document.querySelectorAll('.options-menu');
      menus.forEach(menu => {
          if (menu.style.display === 'block' && !menu.contains(event.target) && !event.target.classList.contains('more-options-btn')) {
              menu.style.display = 'none';
          }
      });
    }

    function filterMovies() {
      const query = document.getElementById('search-bar').value.toLowerCase();
      for (const key in allMovieElements) {
          const card = allMovieElements[key];
          const title = card.getAttribute('data-title');
          const category = card.getAttribute('data-category');
          const isMatch = (title.includes(query) || category.includes(query)) && (currentCategoryFilter === 'all' || category.includes(currentCategoryFilter));
          card.style.display = isMatch ? 'block' : 'none';
      }
    }

    function filterByCategory(category, event) {
        currentCategoryFilter = category.toLowerCase();
        document.querySelectorAll('.category-filters button').forEach(button => button.classList.remove('active'));
        if (event.target) event.target.classList.add('active');
        filterMovies();
    }

    function toggleLike(event, movieKey) {
        event.stopPropagation();
        const storageKey = `likedMovie_${movieKey}`;
        if (localStorage.getItem(storageKey)) {
            alert("You have already liked this movie!");
            return;
        }
        const movieRef = database.ref('movies/' + movieKey);
        movieRef.transaction(currentData => {
            if (currentData) {
                currentData.likeCount = (currentData.likeCount || 0) + 1;
            }
            return currentData;
        }).then(() => {
            localStorage.setItem(storageKey, 'true');
        });
    }

    function toggleOptionsMenu(event) {
        event.stopPropagation();
        const menu = event.target.nextElementSibling;
        const isVisible = menu.style.display === 'block';
        document.querySelectorAll('.options-menu').forEach(m => m.style.display = 'none');
        menu.style.display = isVisible ? 'none' : 'block';
    }
    
    document.getElementById('saved-posts-button').addEventListener('click', () => {
        const savedPostsModal = document.getElementById('savedPostsModal');
        const savedPostsList = document.getElementById('saved-posts-list');
        const noSavedPostsMessage = document.getElementById('no-saved-posts-message');
        savedPostsList.innerHTML = '';
        let hasSavedPosts = false;
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key.startsWith('savedMovie_')) {
                hasSavedPosts = true;
                const movieData = JSON.parse(localStorage.getItem(key));
                const item = document.createElement('div');
                item.className = 'thumbnail-item';
                item.innerHTML = `<img src="${movieData.image}" alt="${movieData.title}"><div class="title">${movieData.title}</div><span class="remove-saved" onclick="removeSavedPost(event, '${key}')">√ó</span>`;
                item.onclick = () => openSavedPostViewer(movieData);
                savedPostsList.appendChild(item);
            }
        }
        noSavedPostsMessage.style.display = hasSavedPosts ? 'none' : 'block';
        savedPostsList.style.display = hasSavedPosts ? 'grid' : 'none';
        savedPostsModal.style.display = 'block';
    });

    function savePostToLocalStorage(event, key, title, image, link, link2, link3, category) {
        event.preventDefault();
        const movieData = { key, title, image, link, link2, link3, category };
        localStorage.setItem(`savedMovie_${key}`, JSON.stringify(movieData));
        alert(`"${title}" has been saved!`);
        event.target.closest('.options-menu').style.display = 'none';
    }
    
    function removeSavedPost(event, key) {
        event.stopPropagation();
        if (confirm('Are you sure you want to remove this post?')) {
            localStorage.removeItem(key);
            event.target.parentElement.remove();
        }
    }

    function openSavedPostViewer(movieData) {
        openViewer(movieData.title, movieData.image, movieData.link, movieData.link2, movieData.link3, movieData.category);
        closeModal('savedPostsModal');
    }

  </script>
</body>
  </html>
